<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SkillGuide - Offline</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu,
          Cantarell, sans-serif;
        background: linear-gradient(135deg, #5b47e6 0%, #7c4dff 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
      }

      .container {
        text-align: center;
        padding: 2rem;
        max-width: 600px;
      }

      .logo {
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 1rem;
        letter-spacing: 0.05em;
      }

      .offline-icon {
        width: 120px;
        height: 120px;
        margin: 2rem auto;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: pulse 2s infinite;
      }

      .offline-icon svg {
        width: 60px;
        height: 60px;
        fill: white;
      }

      h1 {
        font-size: 2rem;
        margin-bottom: 1rem;
      }

      p {
        font-size: 1.1rem;
        margin-bottom: 1.5rem;
        opacity: 0.9;
        line-height: 1.6;
      }

      .features {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 1.5rem;
        margin: 2rem 0;
        text-align: left;
      }

      .feature-item {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
        font-size: 0.95rem;
      }

      .feature-item:last-child {
        margin-bottom: 0;
      }

      .feature-icon {
        width: 20px;
        height: 20px;
        margin-right: 12px;
        fill: #a5f3fc;
      }

      .retry-btn {
        background: white;
        color: #5b47e6;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 1rem 0.5rem;
      }

      .retry-btn:hover {
        background: #f8fafc;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .secondary-btn {
        background: transparent;
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.3);
      }

      .secondary-btn:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.5);
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.05);
          opacity: 0.8;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      .status-indicator {
        display: inline-flex;
        align-items: center;
        margin-top: 1rem;
        padding: 0.5rem 1rem;
        background: rgba(239, 68, 68, 0.2);
        border-radius: 20px;
        font-size: 0.9rem;
      }

      .status-indicator.online {
        background: rgba(34, 197, 94, 0.2);
      }

      .status-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #ef4444;
        margin-right: 8px;
        animation: blink 1.5s infinite;
      }

      .status-dot.online {
        background: #22c55e;
        animation: none;
      }

      @keyframes blink {
        0%,
        50% {
          opacity: 1;
        }
        51%,
        100% {
          opacity: 0.3;
        }
      }

      @media (max-width: 768px) {
        .container {
          padding: 1rem;
        }

        .logo {
          font-size: 2rem;
        }

        h1 {
          font-size: 1.5rem;
        }

        p {
          font-size: 1rem;
        }

        .offline-icon {
          width: 100px;
          height: 100px;
        }

        .offline-icon svg {
          width: 50px;
          height: 50px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="logo">SKILLGUIDE</div>

      <div class="offline-icon">
        <svg viewBox="0 0 24 24">
          <path
            d="M2.293 8.207l1.414-1.414L12 15.086l8.293-8.293 1.414 1.414L12 17.914z"
          />
          <path
            d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"
          />
        </svg>
      </div>

      <h1>You're Offline</h1>
      <p>
        Don't worry! You can still access some features of SkillGuide while
        offline. Your progress will sync automatically when you're back online.
      </p>

      <div class="features">
        <div class="feature-item">
          <svg class="feature-icon" viewBox="0 0 24 24">
            <path
              d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"
            />
            <path d="M9 17l3-3 3 3-3 3z" />
          </svg>
          Review cached study materials and notes
        </div>
        <div class="feature-item">
          <svg class="feature-icon" viewBox="0 0 24 24">
            <path
              d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"
            />
          </svg>
          Access your downloaded course content
        </div>
        <div class="feature-item">
          <svg class="feature-icon" viewBox="0 0 24 24">
            <path
              d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
            />
          </svg>
          Continue working on offline assignments
        </div>
        <div class="feature-item">
          <svg class="feature-icon" viewBox="0 0 24 24">
            <path
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
            />
          </svg>
          View your progress and achievements
        </div>
      </div>

      <div class="status-indicator" id="connectionStatus">
        <div class="status-dot" id="statusDot"></div>
        <span id="statusText">No internet connection</span>
      </div>

      <div style="margin-top: 2rem">
        <button class="retry-btn" onclick="checkConnection()">Try Again</button>
        <button class="retry-btn secondary-btn" onclick="goToDashboard()">
          View Offline Content
        </button>
      </div>

      <p style="margin-top: 2rem; font-size: 0.9rem; opacity: 0.7">
        Your data will automatically sync when connection is restored.
      </p>
    </div>

    <script>
      let isOnline = navigator.onLine;

      function updateConnectionStatus() {
        const statusElement = document.getElementById("connectionStatus");
        const dotElement = document.getElementById("statusDot");
        const textElement = document.getElementById("statusText");

        if (navigator.onLine) {
          statusElement.classList.add("online");
          dotElement.classList.add("online");
          textElement.textContent = "Connection restored!";

          // Redirect to main app after 2 seconds
          setTimeout(() => {
            window.location.href = "/";
          }, 2000);
        } else {
          statusElement.classList.remove("online");
          dotElement.classList.remove("online");
          textElement.textContent = "No internet connection";
        }
      }

      function checkConnection() {
        if (navigator.onLine) {
          window.location.reload();
        } else {
          // Animate the retry button
          event.target.style.transform = "scale(0.95)";
          setTimeout(() => {
            event.target.style.transform = "scale(1)";
          }, 150);

          // Show a message
          const statusText = document.getElementById("statusText");
          const originalText = statusText.textContent;
          statusText.textContent =
            "Still offline, please check your connection";
          setTimeout(() => {
            statusText.textContent = originalText;
          }, 3000);
        }
      }

      function goToDashboard() {
        // Try to navigate to cached dashboard
        if ("serviceWorker" in navigator) {
          window.location.href = "/dashboard";
        } else {
          alert(
            "Offline mode not available. Please check your internet connection.",
          );
        }
      }

      // Listen for online/offline events
      window.addEventListener("online", updateConnectionStatus);
      window.addEventListener("offline", updateConnectionStatus);

      // Check connection status periodically
      setInterval(() => {
        if (navigator.onLine !== isOnline) {
          isOnline = navigator.onLine;
          updateConnectionStatus();
        }
      }, 1000);

      // Initialize status
      updateConnectionStatus();

      // Register service worker if available
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("/sw.js")
          .then((registration) => {
            console.log("SW registered: ", registration);
          })
          .catch((registrationError) => {
            console.log("SW registration failed: ", registrationError);
          });
      }
    </script>
  </body>
</html>
